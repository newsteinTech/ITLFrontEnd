
<br>
<div class="card m-5">
<h5 class="card-header text-center">Edit Incident</h5>
<div class="card-body">
<div class="container col-md-10 col-md-offset-2">
<form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
    
    <div class="form-row">
      <div class="form-group col-md-6">
        <label> <b>Incident Number</b></label>
        <input type="text" class="form-control" name="IncidentNumber" [(ngModel)]="updatedData.IncidentNumber" disabled>
      </div>
      <div class="form-group col-md-6">
        <label ><b>Caller*</b></label>
        <div class="input-group">
        <input type="text" class="form-control" name="Caller" [(ngModel)]="updatedData.Caller" disabled>
        </div>
    </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label ><b>Category</b></label>
            <select class="form-control" [(ngModel)]="updatedData.Category" (click)="subcategoryHandler(updatedData.Category)" [ngModelOptions]="{standalone: true}">
              <option selected>Choose...</option>
              <option>Software</option>
              <option>Hardware</option>
              <option>Network</option>
              <option>Database</option>
              <option>Inquiry/Help</option>
            </select>
        </div>
        <div class="form-group col-md-6">
            <label ><b>Subcategory</b></label>
            <select class="form-control" [(ngModel)]="updatedData.Subcategory"  [ngModelOptions]="{standalone: true}">
              <option selected>--None--</option>
              <option *ngFor="let item of subcategory">{{item}}</option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label ><b>Impact*</b></label>
            <select class="form-control" name="Impact" [(ngModel)]="updatedData.Impact" 
            (click)="priorityHandler(updatedData.Impact, updatedData.Urgency)">
              <option selected>Choose...</option>
              <option>High</option>
              <option>Medium</option>
              <option>Low</option>
            </select>
        </div>
        <div class="form-group col-md-6">
            <label ><b>Urgency*</b></label>
            <select class="form-control" name="Urgency" [(ngModel)]="updatedData.Urgency"
            (click)="priorityHandler(updatedData.Impact, updatedData.Urgency)">
              <option selected>Choose...</option>
              <option>High</option>
              <option>Medium</option>
              <option>Low</option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label ><b>Priority</b></label>
            <input type="text" class="form-control" name="Priority" [(ngModel)]="updatedData.Priority" disabled>      
        </div>
        <div class="form-group col-md-6">
            <label ><b>On Behalf Of</b></label>
            <div class="input-group">
            <input type="text" class="form-control" name="OnBehalfOf" [(ngModel)]="updatedData.OnBehalfOf">      
            <div class="input-group-append">
                <a class="btn btn-info" href="http://localhost:4200/userList" target="_blank">Select</a>  
            </div>
            </div>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label ><b>Assignment Group*</b></label>
            <select class="form-control" (click)="assignedToHandler(updatedData.AssignmentGroup.GroupId)" [(ngModel)]="updatedData.AssignmentGroup.GroupId" [ngModelOptions]="{standalone: true}">
              <option >Choose..</option>
              <option *ngFor="let item of groupData">{{item.GroupId}}</option>
            </select>
        </div>
        <div class="form-group col-md-6">
            <label ><b>Assigned To</b></label>
            <select class="form-control" [(ngModel)]="updatedData.AssignedTo.Name" [ngModelOptions]="{standalone: true}">
              <option *ngFor="let item of assignedToList">{{item}}</option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label ><b>State</b></label>
            <select class="form-control" [(ngModel)]="updatedData.State" [ngModelOptions]="{standalone: true}" 
            name="State" #State="ngModel" [ngClass]="{ 'is-invalid': f.submitted && State.invalid }">
              <option>New</option>
              <option>In Progress</option>
              <option>Resolved</option>
              <option>Closed</option>
              <option>Cancelled</option>
            </select>
        </div>
    </div>

    
        <div class="form-group">
            <label ><b>Short Description*</b></label>
            <textarea class="form-control" rows="1" name="ShortDescription" [(ngModel)]="updatedData.ShortDescription" 
            #ShortDescription="ngModel" [ngClass]="{ 'is-invalid': f.submitted && ShortDescription.invalid }" required></textarea>     
            <div *ngIf="f.submitted && ShortDescription.invalid" class="invalid-feedback">
                <div *ngIf="ShortDescription.errors.required">Short Description is required</div>
            </div>
        </div>
   
    
        <div class="form-group">
            <label ><b>Description</b></label>
            <textarea class="form-control" rows="5" name="Description" [(ngModel)]="updatedData.Description"></textarea>     
        </div>

            <button type="submit" class="btn btn-info" (click)="updateIncidentHandler()">Update</button>
        </form>
  </div>
  </div>
  <div class="card m-5">
      <div class="card-header">
          Resolution Details
      </div>
      <div class="card-body">
        <div class="form-group">
            <label ><b>Work Notes</b></label>
            <textarea class="form-control" rows="2" name="WorkNotes" ></textarea>     
            <label ><b>Commented by</b></label>
            <select class="form-control" >
              <option selected>--None--</option>
              <option *ngFor="let item of userData">{{item.Name}}</option>
            </select>
        </div>
        <div class="form-group col-md-8">
            <label ><b>Resolution Code</b></label>
            <select class="form-control" >
              <option selected>--None--</option>
              <option >Solved by workaround</option>
              <option >Solved Permanently</option>
              <option >Not Solved</option>
              <option >Closed</option>
            </select>
        </div>
        <div class="form-group col-md-8">
            <label ><b>Resolved by</b></label>
            <select class="form-control" >
              <option selected>--None--</option>
              <option *ngFor="let item of userData">{{item.Name}}</option>
            </select>
        </div>
      </div>
  </div>
  </div>
<br><br>
    
 
     

